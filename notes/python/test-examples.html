<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Open Graph -->
    <meta property="og:url" content="https://gavinw.me/notes/python/test-examples.html">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Gavin Wiggins">
    <meta property="og:description" content="Test Examples with Python">
    <meta property="og:image" content="https://gavinw.me/assets/images/opengraph.jpg">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Highlightjs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/languages/julia.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- MathJax -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="../../styles.css">

    <title>Gavin Wiggins</title>
</head>
<body>
<div class="container">
<div class="row">
<div class="col-md">
    <h1><a href="/" style="color: inherit;">Gavin Wiggins</a></h1>

    <p style="font-weight: 500;">
        <a href="../../notes.html">Notes</a> &nbsp; / &nbsp;
        <a href="../../links.html">Links</a> &nbsp; / &nbsp;
        <a href="../../contact.html">Contact</a>
    </p>

    <hr class="mb-5">

    <h1>Test Examples with Python</h1>

    <h6 class="text-secondary">Written on November 8, 2022</h6>

    <p>Example scripts are often available for Python packages to demonstrate how to use the package. The examples are typically part of the repository where the package is developed. Tests should be written to ensure the examples continue to work with new versions of the package.</p>
<p>Below is the structure of a project for developing a Python package. Notice the <code>examples</code> directory that contains example scripts for demonstrating functions from <code>mypackage</code>.</p>
<pre><code>myproject/
├── README.md
├── examples/
│   ├── ex1.py
│   └── ex2.py
├── pyproject.toml
├── src/
│   └── mypackage/
│       ├── __init__.py
│       ├── adder.py
│       └── divider.py
└── tests/
    ├── test_adder.py
    ├── test_divider.py
    ├── test_ex1.py
    └── test_ex2.py
</code></pre>
<p>To ensure pytest can discover the examples, add the project to the Python path as shown below in the <code>pyproject.toml</code> file:</p>
<pre><code class="language-toml">[tool.pytest.ini_options]
pythonpath = [&quot;.&quot;]
</code></pre>
<p>The content of the first example is shown below along with the associated test. The test imports the example and asserts the value of the <code>a</code> variable.</p>
<pre><code class="language-python"># Example 1 from examples/ex1.py

from mypackage import adder

x = 2.5
y = 8

a = adder(x, y)
print('a is', a)
</code></pre>
<pre><code class="language-python"># Test for example 1 from tests/test_ex1.py

from examples import ex1

def test_ex1():
    a = ex1.a
    assert a == 10.5
</code></pre>
<p>The content of the second example is shown below along with the test. Unlike the previous example, this example contains all its code within functions. The test imports the example and asserts the returned value of the <code>run_divider()</code> function.</p>
<pre><code class="language-python"># Example 2 from examples/ex2.py

from mypackage import divider

def run_divider():
    x = 4
    y = 9.2
    d = divider(x, y)
    return d

def main():
    d = run_divider()
    print('d is', d)

if __name__ == '__main__':
    main()
</code></pre>
<pre><code class="language-python"># Test for example 2 from tests/test_ex2.py

from examples import ex2
import pytest

def test_ex2():
    d = ex2.run_divider()
    assert d == pytest.approx(0.4347, rel=1e-3)
</code></pre>

    <br>

    <p class="text-center small my-5">
        Gavin Wiggins © 2025<br>
        Made on a <a href="https://www.apple.com/mac/">Mac</a> with <a href="https://github.com/wigging/genja">Genja</a>. Hosted on <a href="https://pages.github.com">GitHub Pages</a>.
    </p>
</div>  <!-- end col-md -->
</div>  <!-- end row -->
</div>  <!-- end container -->
</body>
</html>